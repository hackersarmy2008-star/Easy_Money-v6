{"file_contents":{"api/auth.js":{"content":"const bcrypt = require('bcrypt');\nconst jwt = require('jsonwebtoken');\nconst { db } = require('./db');\n\nlet JWT_SECRET = process.env.JWT_SECRET;\n\nif (!JWT_SECRET) {\n  JWT_SECRET = 'easymoney-premium-jwt-secret-2024-CHANGE-THIS-IN-PRODUCTION';\n  console.warn('\\n⚠️  WARNING: Using default JWT_SECRET. Set JWT_SECRET environment variable for production!\\n');\n}\n\nfunction generateReferralCode() {\n  return Math.random().toString(36).substring(2, 8).toUpperCase();\n}\n\nasync function register(req, res) {\n  const { phone, password, referralCode } = req.body;\n\n  if (!phone || !password) {\n    return res.status(400).json({ error: 'Phone and password are required' });\n  }\n\n  if (phone.length < 10) {\n    return res.status(400).json({ error: 'Invalid phone number' });\n  }\n\n  try {\n    const existingUser = db.prepare('SELECT id FROM users WHERE phone = ?').get(phone);\n    if (existingUser) {\n      return res.status(400).json({ error: 'Phone number already registered' });\n    }\n\n    const passwordHash = await bcrypt.hash(password, 10);\n    const userReferralCode = generateReferralCode();\n\n    const result = db.prepare(\n      `INSERT INTO users (phone, password_hash, referral_code, referred_by) \n       VALUES (?, ?, ?, ?)`\n    ).run(phone, passwordHash, userReferralCode, referralCode || null);\n\n    const user = db.prepare('SELECT id, phone, referral_code, balance FROM users WHERE id = ?').get(result.lastInsertRowid);\n\n    const token = jwt.sign({ userId: user.id, phone: user.phone }, JWT_SECRET, { expiresIn: '30d' });\n\n    res.json({\n      message: 'Registration successful',\n      token,\n      user: {\n        id: user.id,\n        phone: user.phone,\n        referralCode: user.referral_code,\n        balance: user.balance\n      }\n    });\n  } catch (error) {\n    console.error('Registration error:', error);\n    res.status(500).json({ error: 'Registration failed' });\n  }\n}\n\nasync function login(req, res) {\n  const { phone, password } = req.body;\n\n  if (!phone || !password) {\n    return res.status(400).json({ error: 'Phone and password are required' });\n  }\n\n  try {\n    const user = db.prepare(\n      'SELECT id, phone, password_hash, referral_code, balance, is_admin FROM users WHERE phone = ?'\n    ).get(phone);\n\n    if (!user) {\n      return res.status(401).json({ error: 'Invalid phone or password' });\n    }\n\n    const validPassword = await bcrypt.compare(password, user.password_hash);\n\n    if (!validPassword) {\n      return res.status(401).json({ error: 'Invalid phone or password' });\n    }\n\n    const token = jwt.sign({ \n      userId: user.id, \n      phone: user.phone,\n      isAdmin: user.is_admin \n    }, JWT_SECRET, { expiresIn: '30d' });\n\n    res.json({\n      message: 'Login successful',\n      token,\n      user: {\n        id: user.id,\n        phone: user.phone,\n        referralCode: user.referral_code,\n        balance: user.balance,\n        isAdmin: user.is_admin\n      }\n    });\n  } catch (error) {\n    console.error('Login error:', error);\n    res.status(500).json({ error: 'Login failed' });\n  }\n}\n\nfunction authenticateToken(req, res, next) {\n  const authHeader = req.headers['authorization'];\n  const token = authHeader && authHeader.split(' ')[1];\n\n  if (!token) {\n    return res.status(401).json({ error: 'Access token required' });\n  }\n\n  jwt.verify(token, JWT_SECRET, (err, user) => {\n    if (err) {\n      return res.status(403).json({ error: 'Invalid or expired token' });\n    }\n    req.user = user;\n    next();\n  });\n}\n\nmodule.exports = { register, login, authenticateToken };\n","size_bytes":3521},"style.css":{"content":"/* ---------- GLOBAL ---------- */\n:root{\n  --primary: #FFD700;\n  --primary-2: #FFC300;\n  --primary-3: #FFE55C;\n  --accent: #f59e0b;\n  --accent-2: #fbbf24;\n  --success: #10b981;\n  --danger: #ef4444;\n  --muted: #6b7280;\n  --card: #ffffff;\n  --bg: linear-gradient(135deg, #fffef0 0%, #fff9e6 100%);\n  --shadow-sm: 0 2px 8px rgba(255, 215, 0, 0.08);\n  --shadow-md: 0 8px 24px rgba(255, 215, 0, 0.12);\n  --shadow-lg: 0 16px 48px rgba(255, 215, 0, 0.16);\n}\n\n*{\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\nbody{\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\n  background: var(--bg);\n  color: #1f2937;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  line-height: 1.6;\n}\n\n/* ---------- HEADER ---------- */\n.header-top{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);\n}\n.header-top .logo{\n  font-weight: 800;\n  font-size: 20px;\n  letter-spacing: -0.5px;\n}\n.header-top .icons i{\n  font-size: 22px;\n  margin-left: 16px;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n}\n.header-top .icons i:hover{\n  transform: scale(1.1);\n}\n\n/* ---------- BOTTOM NAV ---------- */\n.bottom-nav{\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: space-around;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  padding: 12px 0;\n  border-top: 1px solid rgba(255, 215, 0, 0.1);\n  box-shadow: 0 -8px 24px rgba(0, 0, 0, 0.08);\n  z-index: 40;\n}\n.bottom-nav .nav-item{\n  color: #9ca3af;\n  text-decoration: none;\n  font-size: 12px;\n  font-weight: 600;\n  text-align: center;\n  width: 25%;\n  transition: all 0.3s ease;\n  padding: 8px 0;\n  border-radius: 12px;\n}\n.bottom-nav .nav-item i{\n  display: block;\n  font-size: 24px;\n  margin-bottom: 4px;\n  transition: transform 0.3s ease;\n}\n.bottom-nav .nav-item.active{\n  color: var(--primary);\n}\n.bottom-nav .nav-item.active i{\n  transform: translateY(-2px);\n}\n\n/* ---------- HOME PAGE ---------- */\nmain{\n  padding-bottom: 100px;\n}\n\n.banner{\n  padding: 0 16px;\n  margin-top: 16px;\n}\n.banner img{\n  width: 100%;\n  border-radius: 20px;\n  box-shadow: var(--shadow-md);\n  transition: transform 0.3s ease;\n}\n.banner img:hover{\n  transform: scale(1.02);\n}\n\n.quick-actions{\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 12px;\n  margin: 20px 16px;\n}\n.quick-actions .action{\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  padding: 16px 8px;\n  border-radius: 16px;\n  text-align: center;\n  box-shadow: var(--shadow-md);\n  transition: all 0.3s ease;\n  cursor: pointer;\n}\n.quick-actions .action:hover{\n  transform: translateY(-4px);\n  box-shadow: var(--shadow-lg);\n}\n.quick-actions .action i{\n  font-size: 28px;\n  display: block;\n  margin-bottom: 8px;\n}\n.quick-actions .action span{\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.plans{\n  padding: 16px;\n}\n.plans h2{\n  font-size: 20px;\n  font-weight: 800;\n  margin-bottom: 16px;\n  color: var(--primary);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n#plansGrid{\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 16px;\n}\n.plan-card{\n  background: var(--card);\n  padding: 16px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  box-shadow: var(--shadow-md);\n  transition: all 0.3s ease;\n  border: 1px solid rgba(255, 215, 0, 0.1);\n}\n.plan-card:hover{\n  transform: translateY(-4px);\n  box-shadow: var(--shadow-lg);\n  border-color: var(--primary-2);\n}\n.plan-left img{\n  height: 80px;\n  border-radius: 12px;\n}\n.plan-info{\n  flex: 1;\n}\n.plan-info h3{\n  margin: 0 0 8px 0;\n  font-size: 18px;\n  font-weight: 700;\n  color: #111827;\n}\n.plan-info p.muted{\n  margin: 4px 0;\n  color: var(--muted);\n  font-size: 13px;\n}\n.income-row{\n  display: flex;\n  gap: 24px;\n  margin: 12px 0;\n}\n.income-row .big{\n  font-weight: 800;\n  font-size: 16px;\n  color: var(--primary);\n}\n.plan-action button.invest-btn{\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  border: 0;\n  padding: 10px 16px;\n  border-radius: 12px;\n  cursor: pointer;\n  font-weight: 700;\n  transition: all 0.3s ease;\n  box-shadow: var(--shadow-sm);\n}\n.plan-action button.invest-btn:hover{\n  transform: scale(1.05);\n  box-shadow: var(--shadow-md);\n}\n\n.transactions{\n  padding: 16px;\n}\n.transactions h2{\n  font-size: 20px;\n  font-weight: 800;\n  margin-bottom: 16px;\n  color: #111827;\n}\n.transaction{\n  background: var(--card);\n  padding: 14px;\n  border-radius: 12px;\n  margin-bottom: 10px;\n  font-size: 13px;\n  color: #4b5563;\n  box-shadow: var(--shadow-sm);\n  border-left: 3px solid var(--primary);\n  transition: all 0.3s ease;\n}\n.transaction:hover{\n  transform: translateX(4px);\n  box-shadow: var(--shadow-md);\n}\n\n/* ---------- PRODUCTS PAGE ---------- */\n.page-header{\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  padding: 20px;\n  text-align: center;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);\n}\n.page-header h2{\n  font-size: 24px;\n  font-weight: 800;\n}\n.page-header .header-lock{\n  position: absolute;\n  right: 20px;\n  top: 18px;\n  font-size: 24px;\n  opacity: 0.9;\n  cursor: pointer;\n  transition: transform 0.3s ease;\n}\n.page-header .header-lock:hover{\n  transform: rotate(15deg);\n}\n\n.products-page{\n  padding: 16px;\n  padding-bottom: 100px;\n}\n.tabs{\n  display: flex;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n.tab{\n  background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 195, 0, 0.1) 100%);\n  color: var(--primary);\n  border-radius: 24px;\n  padding: 10px 20px;\n  border: 2px solid transparent;\n  cursor: pointer;\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n.tab.active{\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  box-shadow: var(--shadow-md);\n}\n.tab:hover{\n  transform: translateY(-2px);\n}\n\n.product-list{\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.product-card{\n  background: var(--card);\n  border-radius: 20px;\n  padding: 16px;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  box-shadow: var(--shadow-md);\n  position: relative;\n  border: 1px solid rgba(255, 215, 0, 0.1);\n  transition: all 0.3s ease;\n}\n.product-card:hover{\n  transform: translateY(-4px);\n  box-shadow: var(--shadow-lg);\n  border-color: var(--primary-2);\n}\n.product-card .badge{\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-2) 100%);\n  color: white;\n  padding: 6px 12px;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: 700;\n  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);\n}\n.product-left img{\n  width: 90px;\n  height: 90px;\n  object-fit: contain;\n  border-radius: 12px;\n}\n.product-mid{\n  flex: 1;\n}\n.product-mid h3{\n  margin: 0 0 8px 0;\n  font-size: 18px;\n  font-weight: 700;\n  color: #111827;\n}\n.product-mid .muted{\n  font-size: 12px;\n  color: var(--muted);\n}\n.product-mid .big{\n  font-weight: 800;\n  font-size: 16px;\n  color: var(--primary);\n}\n.product-right .invest{\n  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-2) 100%);\n  border: none;\n  color: #fff;\n  padding: 12px 24px;\n  border-radius: 24px;\n  cursor: pointer;\n  font-weight: 700;\n  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.3);\n  transition: all 0.3s ease;\n}\n.product-right .invest:hover{\n  transform: scale(1.05);\n  box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);\n}\n.price{\n  margin-top: 8px;\n  color: #374151;\n  font-weight: 600;\n}\n.orange{\n  color: var(--accent);\n  font-weight: 800;\n}\n.purple{\n  color: var(--primary);\n}\n\n/* ---------- PROMOTION PAGE ---------- */\n.promotion-page{\n  padding: 16px;\n  padding-bottom: 120px;\n}\n.card{\n  background: var(--card);\n  border-radius: 20px;\n  padding: 16px;\n  margin-bottom: 16px;\n  box-shadow: var(--shadow-md);\n  border: 1px solid rgba(255, 215, 0, 0.1);\n  transition: all 0.3s ease;\n}\n.card:hover{\n  box-shadow: var(--shadow-lg);\n  border-color: var(--primary-2);\n}\n.promo-stats{\n  display: flex;\n  justify-content: space-around;\n  padding: 20px;\n  align-items: center;\n  background: linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(255, 195, 0, 0.05) 100%);\n  border-radius: 16px;\n}\n.promo-stats .stat{\n  text-align: center;\n  flex: 1;\n}\n.promo-stats .stat .big{\n  font-size: 24px;\n  font-weight: 800;\n  color: var(--primary);\n}\n.invite{\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px;\n  background: linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(255, 195, 0, 0.05) 100%);\n  border-radius: 16px;\n}\n.invite-left img{\n  width: 56px;\n  height: 56px;\n  border-radius: 12px;\n}\n.invite-mid{\n  flex: 1;\n}\n.invite-mid p{\n  font-weight: 600;\n  color: #111827;\n  margin-bottom: 4px;\n}\n.invite-mid small{\n  color: var(--muted);\n  font-size: 11px;\n}\n.copy-btn{\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  padding: 10px 20px;\n  border-radius: 20px;\n  border: 0;\n  cursor: pointer;\n  font-weight: 700;\n  box-shadow: var(--shadow-md);\n  transition: all 0.3s ease;\n}\n.copy-btn:hover{\n  transform: scale(1.05);\n  box-shadow: var(--shadow-lg);\n}\n.level{\n  padding: 16px;\n}\n.level-head{\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n.level-head img{\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n}\n.level-head h4{\n  flex: 1;\n  font-size: 16px;\n  font-weight: 700;\n  color: #111827;\n}\n.level-row{\n  display: flex;\n  justify-content: space-between;\n  padding-top: 12px;\n  gap: 12px;\n}\n.level-row > div{\n  flex: 1;\n  text-align: center;\n  padding: 12px;\n  background: linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(255, 195, 0, 0.05) 100%);\n  border-radius: 12px;\n}\n.level-row .big{\n  font-size: 18px;\n  font-weight: 800;\n  color: var(--primary);\n}\n\n/* ---------- PROFILE (MINE) ---------- */\n.profile-top{\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  padding: 20px;\n  text-align: center;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);\n}\n.profile-top h2{\n  font-size: 24px;\n  font-weight: 800;\n}\n.profile-main{\n  padding: 16px;\n  padding-bottom: 120px;\n}\n.profile-hero{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n.profile-left{\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.profile-avatar{\n  width: 72px;\n  height: 72px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  padding: 4px;\n  box-shadow: var(--shadow-md);\n}\n.profile-name h3{\n  margin: 0;\n  font-size: 20px;\n  font-weight: 800;\n  color: #111827;\n}\n.profile-name p{\n  margin: 4px 0 0 0;\n  color: var(--muted);\n  font-size: 14px;\n}\n.profile-lock{\n  background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 195, 0, 0.1) 100%);\n  padding: 12px;\n  border-radius: 12px;\n  color: var(--primary);\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.profile-lock:hover{\n  transform: scale(1.1);\n}\n\n.balance-card{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px;\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  border-radius: 20px;\n  box-shadow: var(--shadow-lg);\n  margin-bottom: 16px;\n}\n.balance-card .balance-left p.muted{\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 14px;\n  font-weight: 600;\n  margin-bottom: 8px;\n}\n.balance-card .balance-left h2{\n  font-size: 32px;\n  font-weight: 800;\n  margin: 0;\n}\n.recharge-gradient{\n  background: #fff;\n  color: var(--primary);\n  border-radius: 24px;\n  padding: 12px 24px;\n  border: 0;\n  cursor: pointer;\n  font-weight: 800;\n  font-size: 14px;\n  box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);\n  transition: all 0.3s ease;\n}\n.recharge-gradient:hover{\n  transform: scale(1.05);\n}\n\n.stats-gradient{\n  display: flex;\n  justify-content: space-between;\n  padding: 24px;\n  background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 195, 0, 0.1) 100%);\n  color: #111827;\n  border-radius: 20px;\n  margin-bottom: 16px;\n  box-shadow: var(--shadow-md);\n}\n.stats-gradient .stat{\n  text-align: center;\n  flex: 1;\n}\n.stats-gradient .stat .big{\n  font-size: 20px;\n  font-weight: 800;\n  color: var(--primary);\n}\n.stats-gradient .stat .muted{\n  font-size: 12px;\n  margin-top: 4px;\n}\n\n.links{\n  background: var(--card);\n  border-radius: 20px;\n  box-shadow: var(--shadow-md);\n  overflow: hidden;\n  margin-bottom: 16px;\n}\n.links a{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid rgba(255, 215, 0, 0.08);\n  text-decoration: none;\n  color: #374151;\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n.links a:last-child{\n  border-bottom: none;\n}\n.links a:hover{\n  background: linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(255, 195, 0, 0.05) 100%);\n  padding-left: 24px;\n}\n.links a i:first-child{\n  margin-right: 12px;\n  color: var(--primary);\n  font-size: 20px;\n}\n.links a i:last-child{\n  color: var(--muted);\n}\n\n.exit-btn{\n  width: 100%;\n  display: block;\n  margin: 20px 0;\n  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n  color: #fff;\n  padding: 16px;\n  border-radius: 16px;\n  border: 0;\n  cursor: pointer;\n  font-weight: 800;\n  font-size: 16px;\n  box-shadow: 0 8px 24px rgba(239, 68, 68, 0.3);\n  transition: all 0.3s ease;\n}\n.exit-btn:hover{\n  transform: translateY(-2px);\n  box-shadow: 0 12px 32px rgba(239, 68, 68, 0.4);\n}\n\n/* ---------- AUTH (login/register) ---------- */\n.auth-page{\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);\n  padding: 20px;\n}\n.auth-container{\n  width: 100%;\n  max-width: 420px;\n  background: #fff;\n  padding: 32px;\n  border-radius: 24px;\n  box-shadow: var(--shadow-lg);\n  text-align: center;\n}\n.auth-logo{\n  width: 96px;\n  height: 96px;\n  border-radius: 24px;\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  display: block;\n  margin: 0 auto 16px;\n  box-shadow: var(--shadow-md);\n}\n.auth-container h2{\n  font-size: 24px;\n  font-weight: 800;\n  color: #111827;\n  margin: 16px 0 8px;\n}\n.auth-container > p{\n  color: var(--muted);\n  font-size: 14px;\n  margin-bottom: 24px;\n}\n.auth-form{\n  margin-top: 24px;\n}\n.input-row{\n  display: flex;\n  align-items: center;\n  background: #f9fafb;\n  border: 2px solid #e5e7eb;\n  padding: 14px 16px;\n  border-radius: 16px;\n  margin: 12px 0;\n  transition: all 0.3s ease;\n}\n.input-row:focus-within{\n  border-color: var(--primary);\n  background: #fff;\n  box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);\n}\n.input-row input{\n  border: 0;\n  outline: none;\n  font-size: 15px;\n  flex: 1;\n  background: transparent;\n  color: #111827;\n}\n.prefix{\n  margin-right: 12px;\n  color: var(--primary);\n  font-weight: 800;\n  font-size: 16px;\n}\n.otp-row{\n  display: flex;\n  gap: 12px;\n  margin: 12px 0;\n}\n.otp-row input{\n  flex: 1;\n  background: #f9fafb;\n  border: 2px solid #e5e7eb;\n  padding: 14px 16px;\n  border-radius: 16px;\n  font-size: 15px;\n  outline: none;\n  transition: all 0.3s ease;\n}\n.otp-row input:focus{\n  border-color: var(--primary);\n  background: #fff;\n  box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);\n}\n.otp-row .otp-btn{\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  border: 0;\n  color: white;\n  padding: 14px 20px;\n  border-radius: 16px;\n  cursor: pointer;\n  font-weight: 700;\n  box-shadow: var(--shadow-md);\n  transition: all 0.3s ease;\n}\n.otp-row .otp-btn:hover{\n  transform: scale(1.05);\n}\n.primary-btn{\n  width: 100%;\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);\n  color: #fff;\n  padding: 16px;\n  border-radius: 16px;\n  border: 0;\n  font-weight: 800;\n  font-size: 16px;\n  margin-top: 20px;\n  cursor: pointer;\n  box-shadow: var(--shadow-md);\n  transition: all 0.3s ease;\n}\n.primary-btn:hover{\n  transform: translateY(-2px);\n  box-shadow: var(--shadow-lg);\n}\n.muted{\n  color: var(--muted);\n  font-size: 14px;\n  margin-top: 16px;\n}\n.muted a{\n  color: var(--primary);\n  font-weight: 700;\n  text-decoration: none;\n  transition: all 0.3s ease;\n}\n.muted a:hover{\n  text-decoration: underline;\n}\n\n.input-icon{\n  font-size: 20px;\n  color: var(--muted);\n  cursor: pointer;\n  margin-left: 8px;\n  transition: color 0.3s ease;\n}\n.input-icon:hover{\n  color: var(--primary);\n}\n\n.code-box{\n  margin: 12px 0;\n  background: #f9fafb;\n  padding: 16px;\n  border: 2px solid #e5e7eb;\n  border-radius: 16px;\n}\n.ref-code{\n  border: 0;\n  width: 100%;\n  font-weight: 800;\n  background: transparent;\n  text-align: center;\n  font-size: 16px;\n  color: var(--primary);\n  letter-spacing: 2px;\n}\n\n/* ---------- ANIMATIONS ---------- */\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.plan-card, .product-card, .card {\n  animation: fadeIn 0.5s ease;\n}\n\n/* ---------- RESPONSIVE ---------- */\n@media (max-width: 768px){\n  .banner{\n    padding: 0 12px;\n    margin-top: 12px;\n  }\n  .banner img{\n    border-radius: 16px;\n  }\n  .product-left img, .plan-left img{\n    width: 80px;\n    height: 80px;\n    object-fit: cover;\n  }\n  .product-card, .plan-card{\n    padding: 14px;\n    gap: 12px;\n  }\n  .product-mid h3, .plan-info h3{\n    font-size: 16px;\n  }\n  .income-row{\n    gap: 16px;\n  }\n  .product-mid .big, .income-row .big{\n    font-size: 14px;\n  }\n  .product-right .invest{\n    padding: 10px 20px;\n    font-size: 14px;\n  }\n  .header-top{\n    padding: 14px 16px;\n  }\n  .header-top .logo{\n    font-size: 18px;\n  }\n  .bottom-nav{\n    padding: 10px 0;\n  }\n  .bottom-nav .nav-item{\n    font-size: 11px;\n  }\n  .bottom-nav .nav-item i{\n    font-size: 22px;\n  }\n  .transactions, .plans, .products-page{\n    padding: 12px;\n  }\n  .transaction{\n    padding: 12px;\n    font-size: 12px;\n  }\n}\n\n@media (max-width: 480px){\n  .product-left img, .plan-left img{\n    width: 70px;\n    height: 70px;\n  }\n  .product-card, .plan-card{\n    flex-wrap: wrap;\n  }\n  .product-mid, .plan-info{\n    flex: 1;\n    min-width: 180px;\n  }\n  .income-row{\n    gap: 12px;\n    flex-wrap: wrap;\n  }\n  .income-row > div{\n    min-width: 80px;\n  }\n}\n\n@media (max-width: 420px){\n  .product-left img, .plan-left img{\n    width: 64px;\n    height: 64px;\n  }\n  .profile-avatar{\n    width: 64px;\n    height: 64px;\n  }\n  .balance-card{\n    flex-direction: column;\n    text-align: center;\n    gap: 16px;\n  }\n  .quick-actions{\n    grid-template-columns: repeat(4, 1fr);\n    gap: 8px;\n  }\n  .quick-actions .action{\n    padding: 12px 4px;\n  }\n  .quick-actions .action i{\n    font-size: 24px;\n  }\n  .quick-actions .action span{\n    font-size: 10px;\n  }\n  .product-mid h3, .plan-info h3{\n    font-size: 15px;\n  }\n  .product-mid .big, .income-row .big{\n    font-size: 13px;\n  }\n  .product-right .invest, .plan-action button.invest-btn{\n    padding: 8px 16px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n  .banner{\n    padding: 0 10px;\n  }\n}\n\n@media (max-width: 360px){\n  .product-left img, .plan-left img{\n    width: 56px;\n    height: 56px;\n  }\n  .product-card, .plan-card{\n    padding: 12px;\n    gap: 10px;\n  }\n  .header-top .logo{\n    font-size: 16px;\n  }\n  .product-mid h3, .plan-info h3{\n    font-size: 14px;\n  }\n  .income-row .big{\n    font-size: 12px;\n  }\n}\n","size_bytes":19481},"README.md":{"content":"# Project2","size_bytes":10},"main.js":{"content":"// main.js - shared by all pages with backend API integration\n\nconst API_BASE = window.location.origin + '/api';\n\n// Helper to get auth token\nfunction getToken() {\n  return localStorage.getItem('authToken');\n}\n\n// Helper to make authenticated API calls\nasync function apiCall(endpoint, method = 'GET', body = null) {\n  const options = {\n    method,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  const token = getToken();\n  if (token) {\n    options.headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  if (body) {\n    options.body = JSON.stringify(body);\n  }\n\n  const response = await fetch(API_BASE + endpoint, options);\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.error || 'Request failed');\n  }\n\n  return data;\n}\n\n// Highlight current bottom nav\n(function highlightNav(){\n  try {\n    const path = window.location.pathname.split('/').pop();\n    const navs = document.querySelectorAll('.bottom-nav .nav-item');\n    navs.forEach(n=>{\n      n.classList.remove('active');\n      const href = (n.getAttribute('href') || '').split('/').pop();\n      if(href === path || (path === '' && href === 'index.html')) n.classList.add('active');\n    });\n  } catch(e){}\n})();\n\n// REGISTER form\nconst registerForm = document.getElementById('registerForm');\nif(registerForm){\n  registerForm.addEventListener('submit', async (e)=>{\n    e.preventDefault();\n    const phone = document.getElementById('regPhone').value.trim();\n    const pass = document.getElementById('regPassword').value.trim();\n    const referralCode = document.getElementById('referralCode')?.value.trim() || '';\n\n    if(!phone || !pass){ \n      alert('Enter phone and password'); \n      return; \n    }\n\n    try {\n      const data = await apiCall('/auth/register', 'POST', { \n        phone, \n        password: pass,\n        referralCode \n      });\n      \n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('userPhone', data.user.phone);\n      localStorage.setItem('userReferralCode', data.user.referralCode);\n      \n      alert('Registered successfully!');\n      window.location.href = 'index.html';\n    } catch (error) {\n      alert(error.message || 'Registration failed');\n    }\n  });\n}\n\n// LOGIN form\nconst loginForm = document.getElementById('loginForm');\nif(loginForm){\n  loginForm.addEventListener('submit', async (e)=>{\n    e.preventDefault();\n    const phone = document.getElementById('loginPhone').value.trim();\n    const pass = document.getElementById('loginPassword').value.trim();\n\n    if(!phone || !pass){ \n      alert('Enter phone and password'); \n      return; \n    }\n\n    try {\n      const data = await apiCall('/auth/login', 'POST', { \n        phone, \n        password: pass \n      });\n      \n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('userPhone', data.user.phone);\n      localStorage.setItem('userReferralCode', data.user.referralCode);\n      \n      alert('Login successful!');\n      window.location.href = 'index.html';\n    } catch (error) {\n      alert(error.message || 'Login failed');\n    }\n  });\n}\n\n// Check-in function\nwindow.checkIn = async function(){\n  try {\n    const data = await apiCall('/user/checkin', 'POST');\n    alert(`Check-in successful! You earned ₹${data.bonus} bonus!\\nNew balance: ₹${data.balance}`);\n    location.reload();\n  } catch (error) {\n    alert(error.message || 'Check-in failed');\n  }\n};\n\n// Invite function\nwindow.inviteUser = function(){\n  const referralCode = localStorage.getItem('userReferralCode') || 'DEMO';\n  const inviteLink = `${window.location.origin}/register.html?invite=${referralCode}`;\n  \n  const tmp = document.createElement('input');\n  tmp.value = inviteLink;\n  document.body.appendChild(tmp);\n  tmp.select();\n  document.execCommand('copy');\n  document.body.removeChild(tmp);\n  alert('Invitation link copied! Share with friends to earn commissions.');\n};\n\n// Recharge function - navigate to deposit page\nwindow.recharge = function(){\n  window.location.href = 'deposit.html';\n};\n\n// Withdraw function - navigate to withdraw page\nwindow.withdraw = function(){\n  window.location.href = 'withdraw.html';\n};\n\n// Invest function\nwindow.invest = function(price){\n  alert('Invested ₹' + price + ' successfully!');\n};\n\n// Logout helper\nwindow.logout = function(){\n  localStorage.removeItem('authToken');\n  localStorage.removeItem('userPhone');\n  localStorage.removeItem('userReferralCode');\n  window.location.href = 'login.html';\n};\n\n// Profile page functions\nwindow.viewAboutCompany = function(){\n  alert('Easy Money is a revolutionary platform combining IoT technology with agriculture. Founded in 2024.');\n};\n\nwindow.viewIncomeRecord = async function(){\n  try {\n    const data = await apiCall('/transactions', 'GET');\n    const income = data.transactions.filter(t => t.type === 'recharge' || t.type === 'checkin');\n    const total = income.reduce((sum, t) => sum + parseFloat(t.amount), 0);\n    alert(`Income Record:\\n\\nTotal transactions: ${income.length}\\nTotal Income: ₹${total.toFixed(2)}`);\n  } catch (error) {\n    alert('Failed to load income records');\n  }\n};\n\nwindow.viewWithdrawRecord = async function(){\n  try {\n    const data = await apiCall('/transactions', 'GET');\n    const withdrawals = data.transactions.filter(t => t.type === 'withdraw');\n    const total = withdrawals.reduce((sum, t) => sum + parseFloat(t.amount), 0);\n    alert(`Withdrawal Record:\\n\\nTotal withdrawals: ${withdrawals.length}\\nTotal Withdrawn: ₹${total.toFixed(2)}`);\n  } catch (error) {\n    alert('Failed to load withdrawal records');\n  }\n};\n\nwindow.redeemCode = function(){\n  const code = prompt('Enter redeem code:');\n  if(code && code.toUpperCase() === 'WELCOME2024'){\n    alert('Feature coming soon! Code saved for future use.');\n  } else if(code) {\n    alert('Invalid redeem code!');\n  }\n};\n\nwindow.downloadApp = function(){\n  alert('App download coming soon! Continue using the web version for now.');\n};\n\nwindow.copyLink = function(){\n  const referralCode = localStorage.getItem('userReferralCode') || 'DEMO';\n  const inviteLink = `${window.location.origin}/register.html?invite=${referralCode}`;\n  \n  const tmp = document.createElement('input');\n  tmp.value = inviteLink;\n  document.body.appendChild(tmp);\n  tmp.select();\n  document.execCommand('copy');\n  document.body.removeChild(tmp);\n  alert('Invitation link copied!');\n};\n\nfunction sendOtp(){\n  alert('OTP sent (demo). Use any code to continue.');\n}\n","size_bytes":6452},"api/qr-rotation.js":{"content":"const { db } = require('./db');\n\nfunction getActiveQR() {\n  let result = db.prepare(\n    'SELECT * FROM qr_codes WHERE is_active = 1 ORDER BY qr_position LIMIT 1'\n  ).get();\n\n  if (!result) {\n    const firstQR = db.prepare(\n      'SELECT * FROM qr_codes ORDER BY qr_position LIMIT 1'\n    ).get();\n    \n    if (firstQR) {\n      db.prepare(\n        'UPDATE qr_codes SET is_active = 1 WHERE id = ?'\n      ).run(firstQR.id);\n      return firstQR;\n    }\n    \n    throw new Error('No QR codes available');\n  }\n\n  return result;\n}\n\nfunction rotateQR() {\n  const transaction = db.transaction(() => {\n    const currentQR = db.prepare(\n      'SELECT * FROM qr_codes WHERE is_active = 1 ORDER BY qr_position LIMIT 1'\n    ).get();\n\n    if (!currentQR) {\n      return null;\n    }\n\n    db.prepare(\n      'UPDATE qr_codes SET is_active = 0 WHERE id = ?'\n    ).run(currentQR.id);\n\n    let nextQR = db.prepare(\n      'SELECT * FROM qr_codes WHERE qr_position > ? ORDER BY qr_position LIMIT 1'\n    ).get(currentQR.qr_position);\n\n    if (!nextQR) {\n      nextQR = db.prepare(\n        'SELECT * FROM qr_codes ORDER BY qr_position LIMIT 1'\n      ).get();\n    }\n\n    if (!nextQR) {\n      throw new Error('No QR codes available for rotation');\n    }\n\n    db.prepare(\n      'UPDATE qr_codes SET is_active = 1, successful_payments = 0, updated_at = CURRENT_TIMESTAMP WHERE id = ?'\n    ).run(nextQR.id);\n\n    console.log(`QR rotated from position ${currentQR.qr_position} to ${nextQR.qr_position}`);\n    return nextQR;\n  });\n\n  return transaction();\n}\n\nfunction incrementPaymentAndRotate() {\n  const transaction = db.transaction(() => {\n    const qr = db.prepare(\n      'SELECT * FROM qr_codes WHERE is_active = 1 ORDER BY qr_position LIMIT 1'\n    ).get();\n\n    if (!qr) {\n      return null;\n    }\n\n    db.prepare(\n      'UPDATE qr_codes SET successful_payments = successful_payments + 1, updated_at = CURRENT_TIMESTAMP WHERE id = ?'\n    ).run(qr.id);\n\n    const newCount = qr.successful_payments + 1;\n\n    if (newCount >= qr.max_payments_per_qr) {\n      console.log(`QR ${qr.qr_position} reached ${newCount} payments. Rotating...`);\n      rotateQR();\n    } else {\n      console.log(`QR ${qr.qr_position} now has ${newCount}/${qr.max_payments_per_qr} payments`);\n    }\n\n    return true;\n  });\n\n  return transaction();\n}\n\nfunction addQRCode(upiId) {\n  const maxPosition = db.prepare(\n    'SELECT COALESCE(MAX(qr_position), 0) as max_pos FROM qr_codes'\n  ).get();\n  \n  const newPosition = maxPosition.max_pos + 1;\n\n  const result = db.prepare(\n    `INSERT INTO qr_codes (upi_id, qr_position) \n     VALUES (?, ?)`\n  ).run(upiId, newPosition);\n\n  return db.prepare('SELECT * FROM qr_codes WHERE id = ?').get(result.lastInsertRowid);\n}\n\nfunction getAllQRCodes() {\n  const result = db.prepare(\n    'SELECT * FROM qr_codes ORDER BY qr_position'\n  ).all();\n  return result;\n}\n\nfunction updateQRCode(id, upiId) {\n  db.prepare(\n    'UPDATE qr_codes SET upi_id = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?'\n  ).run(upiId, id);\n  \n  return db.prepare('SELECT * FROM qr_codes WHERE id = ?').get(id);\n}\n\nfunction deleteQRCode(id) {\n  db.prepare('DELETE FROM qr_codes WHERE id = ?').run(id);\n  return true;\n}\n\nfunction getQRStats() {\n  const activeQR = db.prepare(\n    'SELECT * FROM qr_codes WHERE is_active = 1 LIMIT 1'\n  ).get();\n\n  const totalQRs = db.prepare(\n    'SELECT COUNT(*) as count FROM qr_codes'\n  ).get();\n\n  const totalPayments = db.prepare(\n    'SELECT SUM(successful_payments) as total FROM qr_codes'\n  ).get();\n\n  return {\n    activeQR: activeQR || null,\n    totalQRs: totalQRs.count,\n    totalPayments: totalPayments.total || 0\n  };\n}\n\nmodule.exports = {\n  getActiveQR,\n  rotateQR,\n  incrementPaymentAndRotate,\n  addQRCode,\n  getAllQRCodes,\n  updateQRCode,\n  deleteQRCode,\n  getQRStats\n};\n","size_bytes":3772},"server.js":{"content":"const http = require('http');\nconst fs = require('fs');\nconst path = require('path');\n\nconst PORT = 5000;\nconst HOST = '0.0.0.0';\n\nconst mimeTypes = {\n  '.html': 'text/html',\n  '.css': 'text/css',\n  '.js': 'text/javascript',\n  '.jpg': 'image/jpeg',\n  '.jpeg': 'image/jpeg',\n  '.png': 'image/png',\n  '.svg': 'image/svg+xml',\n  '.gif': 'image/gif',\n  '.json': 'application/json'\n};\n\nconst server = http.createServer((req, res) => {\n  let filePath = '.' + req.url;\n  if (filePath === './') {\n    filePath = './login.html';\n  }\n\n  const extname = String(path.extname(filePath)).toLowerCase();\n  const contentType = mimeTypes[extname] || 'application/octet-stream';\n\n  fs.readFile(filePath, (error, content) => {\n    if (error) {\n      if (error.code === 'ENOENT') {\n        res.writeHead(404, { 'Content-Type': 'text/html' });\n        res.end('<h1>404 - File Not Found</h1>', 'utf-8');\n      } else {\n        res.writeHead(500);\n        res.end('Server Error: ' + error.code);\n      }\n    } else {\n      res.writeHead(200, { \n        'Content-Type': contentType,\n        'Cache-Control': 'no-cache, no-store, must-revalidate'\n      });\n      res.end(content, 'utf-8');\n    }\n  });\n});\n\nserver.listen(PORT, HOST, () => {\n  console.log(`Server running at http://${HOST}:${PORT}/`);\n});\n","size_bytes":1280},"api/db.js":{"content":"const Database = require('better-sqlite3');\nconst path = require('path');\n\nconst dbPath = path.join(__dirname, '..', 'database.sqlite');\nconst db = new Database(dbPath);\n\ndb.pragma('journal_mode = WAL');\n\nfunction initDatabase() {\n  try {\n    db.exec(`\n      CREATE TABLE IF NOT EXISTS users (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        phone TEXT UNIQUE NOT NULL,\n        password_hash TEXT NOT NULL,\n        balance REAL DEFAULT 0.00,\n        total_recharge REAL DEFAULT 0.00,\n        total_withdraw REAL DEFAULT 0.00,\n        total_welfare REAL DEFAULT 0.00,\n        referral_code TEXT UNIQUE NOT NULL,\n        referred_by TEXT,\n        is_admin INTEGER DEFAULT 0,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    `);\n\n    try {\n      db.exec('SELECT is_admin FROM users LIMIT 1');\n    } catch (error) {\n      if (error.message.includes('no such column')) {\n        console.log('Adding is_admin column to existing users table...');\n        db.exec('ALTER TABLE users ADD COLUMN is_admin INTEGER DEFAULT 0');\n        console.log('is_admin column added successfully');\n      }\n    }\n\n    db.exec(`\n      CREATE TABLE IF NOT EXISTS transactions (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        user_id INTEGER NOT NULL,\n        type TEXT NOT NULL,\n        amount REAL NOT NULL,\n        status TEXT DEFAULT 'pending',\n        upi_id TEXT,\n        utr_number TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (user_id) REFERENCES users(id)\n      )\n    `);\n\n    db.exec(`\n      CREATE TABLE IF NOT EXISTS checkins (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        user_id INTEGER NOT NULL,\n        amount REAL NOT NULL,\n        checkin_date DATE NOT NULL,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (user_id) REFERENCES users(id),\n        UNIQUE(user_id, checkin_date)\n      )\n    `);\n\n    db.exec(`\n      CREATE TABLE IF NOT EXISTS investments (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        user_id INTEGER NOT NULL,\n        plan_name TEXT NOT NULL,\n        amount REAL NOT NULL,\n        daily_profit REAL NOT NULL,\n        total_profit REAL NOT NULL,\n        days INTEGER NOT NULL,\n        status TEXT DEFAULT 'active',\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY (user_id) REFERENCES users(id)\n      )\n    `);\n\n    db.exec(`\n      CREATE TABLE IF NOT EXISTS qr_codes (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        upi_id TEXT UNIQUE NOT NULL,\n        qr_position INTEGER UNIQUE NOT NULL,\n        successful_payments INTEGER DEFAULT 0,\n        max_payments_per_qr INTEGER DEFAULT 10,\n        is_active INTEGER DEFAULT 0,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    `);\n\n    const qrCount = db.prepare('SELECT COUNT(*) as count FROM qr_codes').get();\n    if (qrCount.count === 0) {\n      console.log('Initializing QR rotation system with 7 UPI IDs...');\n      \n      const upiIds = [\n        'hacker-shaw@fam',\n        'jadhavnitin6@bpunity',\n        'aryansinghthakurrajput-1@okhdfcbank',\n        'dheerajya799-20@okicici',\n        'sangeetaya79@okicici',\n        'Manjughazipur7575-3@okhdfcbank',\n        'tanishqsonkar91400-1@okaxis'\n      ];\n\n      const insertQR = db.prepare(\n        'INSERT INTO qr_codes (upi_id, qr_position, is_active) VALUES (?, ?, ?)'\n      );\n\n      const insertMany = db.transaction((codes) => {\n        codes.forEach((code, index) => {\n          insertQR.run(code, index + 1, index === 0 ? 1 : 0);\n        });\n      });\n\n      insertMany(upiIds);\n      console.log('QR rotation system initialized with 7 UPI IDs');\n    }\n\n    console.log('Database initialized successfully');\n  } catch (error) {\n    console.error('Error initializing database:', error);\n    throw error;\n  }\n}\n\nmodule.exports = { db, initDatabase };\n","size_bytes":3876},"replit.md":{"content":"# Easy Money\n\n## Overview\nEasy Money Premium is a mobile-responsive web application simulating an agricultural investment platform. It enables users to register, log in, view investment products, manage their balance, and participate in a referral program. The application features a complete backend API with a SQLite database and an automated UPI payment rotation system. The project aims to provide a professional and premium user experience with a golden-themed interface and robust security features.\n\n## User Preferences\nI prefer detailed explanations. Do not make changes to the folder Z. Do not make changes to the file Y.\n\n## System Architecture\n\n### UI/UX Decisions\nThe application features a premium golden theme (`#FFD700`) applied across all pages, including the admin panel, with golden gradient backgrounds. The design prioritizes mobile responsiveness, with optimizations for various screen sizes (768px, 480px, 420px, 360px breakpoints) to ensure a touch-friendly interface. Professional stock images are used for products and investment plans to enhance visual presentation.\n\n### Technical Implementations\nThe project uses a standard web application architecture:\n- **Frontend**: Built with HTML5, CSS3, and Vanilla JavaScript for a lightweight and responsive user interface.\n- **Backend**: Implemented with Express.js and Node.js, providing a RESTful API.\n- **Database**: SQLite (using `better-sqlite3`) for persistent storage, enabling efficient data management with synchronous operations and WAL mode for performance.\n- **Authentication**: JWT (JSON Web Tokens) for secure user and admin authentication with bcrypt for password hashing. JWTs have a 30-day expiration for users and 24-hour expiration for admins.\n- **Payment System**: Features a custom UPI payment system with 7 UPI IDs configured for automatic rotation after every 10 successful payments to distribute the load. Recharge requires UTR number confirmation, and withdrawals are processed to the user's UPI ID.\n- **Admin Panel**: A comprehensive dashboard for managing users, transactions, and UPI configurations, secured with dedicated login and environment variable-based credentials.\n- **Dynamic Invitation Links**: Unique invitation links are generated for each user based on their referral code, automatically refreshing from user profile data.\n\n### Feature Specifications\n- **Authentication**: User registration with phone and password, JWT-based login, automatic referral code generation.\n- **Dashboard**: Displays banners, quick actions (Check-in, Recharge, Withdraw, Invite), special investment plans, and recent transactions.\n- **Products**: Lists investment products with daily/total income calculations and one-click investment.\n- **Promotion**: Shows referral statistics, unique invitation links, and supports a multi-level commission structure.\n- **Profile**: Displays user profile, real-time balance, statistics (total recharge, withdraw, welfare), and quick links.\n- **Payment Gateway**: Dedicated deposit and withdrawal pages with quick amount buttons, UPI payment method selection, UTR submission, and transaction history. Minimum withdrawal amount is ₹300.\n- **Security**: Password hashing, JWT authentication, protected API routes, SQL injection prevention via parameterized queries, and transaction integrity.\n\n### System Design Choices\n- **API-driven**: Frontend entirely consumes data from the backend API, replacing previous `localStorage` usage.\n- **Scalability**: Designed with a clear separation of concerns between frontend and backend.\n- **Database Migration**: Transitioned from PostgreSQL to SQLite for simplified deployment and synchronous operations.\n- **Environment Variables**: Sensitive information like JWT secrets and admin credentials are managed through environment variables for security.\n\n## External Dependencies\n- **Database**: SQLite (`better-sqlite3` npm package)\n- **Authentication**: `jsonwebtoken` (for JWTs), `bcrypt` (for password hashing)\n- **Frontend Icons**: Bootstrap Icons (via CDN)\n- **Payment Integration**: Custom UPI payment processing (requires manual UTR confirmation from users)","size_bytes":4128},"backend-server.js":{"content":"const express = require('express');\nconst bodyParser = require('body-parser');\nconst cors = require('cors');\nconst path = require('path');\nconst { initDatabase, db } = require('./api/db');\nconst { register, login, authenticateToken } = require('./api/auth');\nconst { initiateRecharge, confirmRecharge, initiateWithdraw, getTransactions, approveRecharge } = require('./api/payment');\nconst { authenticateAdmin, getStats, getAllUsers, getAllTransactions, getPendingPayments, approvePayment, rejectPayment, getUPIs } = require('./api/admin-sqlite');\n\nconst app = express();\nconst PORT = 5000;\nconst HOST = '0.0.0.0';\n\napp.use(cors());\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\napp.use((req, res, next) => {\n  res.setHeader('Cache-Control', 'no-cache, no-store, must-revalidate');\n  next();\n});\n\napp.use(express.static('.', {\n  extensions: ['html'],\n  setHeaders: (res, path) => {\n    res.set('Cache-Control', 'no-cache, no-store, must-revalidate');\n  }\n}));\n\napp.post('/api/auth/register', register);\napp.post('/api/auth/login', login);\n\napp.post('/api/auth/admin-login', async (req, res) => {\n  const { username, password } = req.body;\n  \n  const ADMIN_USERNAME = process.env.ADMIN_USERNAME;\n  const ADMIN_PASSWORD = process.env.ADMIN_PASSWORD;\n  \n  if (!ADMIN_USERNAME || !ADMIN_PASSWORD) {\n    return res.status(500).json({ error: 'Admin credentials not configured' });\n  }\n  \n  if (username !== ADMIN_USERNAME || password !== ADMIN_PASSWORD) {\n    return res.status(401).json({ error: 'Invalid admin credentials' });\n  }\n  \n  const jwt = require('jsonwebtoken');\n  const JWT_SECRET = process.env.JWT_SECRET || 'easymoney-premium-jwt-secret-2024-CHANGE-THIS-IN-PRODUCTION';\n  \n  const token = jwt.sign({ \n    userId: 0,\n    phone: 'admin',\n    isAdmin: true\n  }, JWT_SECRET, { expiresIn: '24h' });\n  \n  res.json({\n    message: 'Admin login successful',\n    token,\n    user: {\n      id: 0,\n      phone: 'admin',\n      isAdmin: true\n    }\n  });\n});\n\napp.get('/api/user/profile', authenticateToken, async (req, res) => {\n  try {\n    const result = db.prepare(\n      `SELECT id, phone, balance, total_recharge, total_withdraw, total_welfare, referral_code \n       FROM users WHERE id = ?`\n    ).get(req.user.userId);\n\n    if (!result) {\n      return res.status(404).json({ error: 'User not found' });\n    }\n\n    res.json({ user: result });\n  } catch (error) {\n    console.error('Profile error:', error);\n    res.status(500).json({ error: 'Failed to fetch profile' });\n  }\n});\n\napp.post('/api/user/checkin', authenticateToken, async (req, res) => {\n  const userId = req.user.userId;\n  const today = new Date().toISOString().split('T')[0];\n\n  try {\n    const existing = db.prepare(\n      'SELECT id FROM checkins WHERE user_id = ? AND checkin_date = ?'\n    ).get(userId, today);\n\n    if (existing) {\n      return res.status(400).json({ error: 'Already checked in today' });\n    }\n\n    const bonus = Math.floor(Math.random() * 51) + 10;\n\n    const checkinTransaction = db.transaction(() => {\n      db.prepare(\n        'INSERT INTO checkins (user_id, amount, checkin_date) VALUES (?, ?, ?)'\n      ).run(userId, bonus, today);\n\n      db.prepare(\n        'UPDATE users SET balance = balance + ?, total_welfare = total_welfare + ? WHERE id = ?'\n      ).run(bonus, bonus, userId);\n    });\n\n    checkinTransaction();\n\n    const userResult = db.prepare('SELECT balance FROM users WHERE id = ?').get(userId);\n\n    res.json({\n      message: 'Check-in successful!',\n      bonus,\n      balance: userResult.balance\n    });\n  } catch (error) {\n    console.error('Check-in error:', error);\n    res.status(500).json({ error: 'Check-in failed' });\n  }\n});\n\napp.post('/api/payment/recharge', authenticateToken, initiateRecharge);\napp.post('/api/payment/recharge/confirm', authenticateToken, confirmRecharge);\napp.post('/api/payment/withdraw', authenticateToken, initiateWithdraw);\napp.get('/api/transactions', authenticateToken, getTransactions);\n\napp.get('/api/admin/stats', authenticateToken, authenticateAdmin, getStats);\napp.get('/api/admin/users', authenticateToken, authenticateAdmin, getAllUsers);\napp.get('/api/admin/transactions', authenticateToken, authenticateAdmin, getAllTransactions);\napp.get('/api/admin/pending', authenticateToken, authenticateAdmin, getPendingPayments);\napp.post('/api/admin/approve', authenticateToken, authenticateAdmin, approvePayment);\napp.post('/api/admin/reject', authenticateToken, authenticateAdmin, rejectPayment);\napp.get('/api/admin/upis', authenticateToken, authenticateAdmin, getUPIs);\n\napp.get('/api/health', (req, res) => {\n  res.json({ status: 'ok', timestamp: new Date().toISOString() });\n});\n\napp.use((req, res, next) => {\n  if (!req.path.startsWith('/api') && req.method === 'GET') {\n    res.sendFile(path.join(__dirname, 'login.html'));\n  } else if (req.path.startsWith('/api')) {\n    res.status(404).json({ error: 'API endpoint not found' });\n  } else {\n    next();\n  }\n});\n\nfunction startServer() {\n  try {\n    initDatabase();\n    app.listen(PORT, HOST, () => {\n      console.log(`Backend server running at http://${HOST}:${PORT}/`);\n      console.log('API endpoints available at /api/*');\n      console.log('Using SQLite database with admin support');\n    });\n  } catch (error) {\n    console.error('Failed to start server:', error);\n    process.exit(1);\n  }\n}\n\nstartServer();\n","size_bytes":5348},"api/payment.js":{"content":"const { db } = require('./db');\nconst { getActiveQR, incrementPaymentAndRotate } = require('./qr-rotation');\n\nasync function initiateRecharge(req, res) {\n  const { amount } = req.body;\n  const userId = req.user.userId;\n\n  if (!amount || amount <= 0) {\n    return res.status(400).json({ error: 'Invalid amount' });\n  }\n\n  try {\n    const activeQR = getActiveQR();\n\n    const result = db.prepare(\n      `INSERT INTO transactions (user_id, type, amount, status) \n       VALUES (?, ?, ?, ?)`\n    ).run(userId, 'recharge', amount, 'pending');\n\n    const transactionId = result.lastInsertRowid;\n\n    res.json({\n      message: 'Recharge initiated',\n      transactionId,\n      upiId: activeQR.upi_id,\n      qrPosition: activeQR.qr_position,\n      amount,\n      instructions: 'Please pay to the UPI ID provided and submit UTR number to confirm'\n    });\n  } catch (error) {\n    console.error('Recharge error:', error);\n    res.status(500).json({ error: 'Failed to initiate recharge' });\n  }\n}\n\nasync function confirmRecharge(req, res) {\n  const { transactionId, utrNumber } = req.body;\n  const userId = req.user.userId;\n\n  if (!transactionId || !utrNumber) {\n    return res.status(400).json({ error: 'Transaction ID and UTR number are required' });\n  }\n\n  try {\n    const transaction = db.prepare(\n      'SELECT id, amount, status FROM transactions WHERE id = ? AND user_id = ? AND type = ?'\n    ).get(transactionId, userId, 'recharge');\n\n    if (!transaction) {\n      return res.status(404).json({ error: 'Transaction not found' });\n    }\n\n    if (transaction.status !== 'pending') {\n      return res.status(400).json({ error: 'Transaction already processed' });\n    }\n\n    db.prepare(\n      'UPDATE transactions SET status = ?, utr_number = ? WHERE id = ?'\n    ).run('verification_pending', utrNumber, transactionId);\n\n    res.json({\n      message: 'UTR submitted successfully. Your recharge will be verified and processed within 24 hours.',\n      note: 'Admin verification required before balance is credited'\n    });\n  } catch (error) {\n    console.error('Confirm recharge error:', error);\n    res.status(500).json({ error: 'Failed to submit UTR' });\n  }\n}\n\nasync function approveRecharge(req, res) {\n  const { transactionId } = req.body;\n\n  if (!transactionId) {\n    return res.status(400).json({ error: 'Transaction ID is required' });\n  }\n\n  try {\n    const transaction = db.prepare(\n      'SELECT id, user_id, amount, status FROM transactions WHERE id = ? AND type = ?'\n    ).get(transactionId, 'recharge');\n\n    if (!transaction) {\n      return res.status(404).json({ error: 'Transaction not found' });\n    }\n\n    if (transaction.status === 'completed') {\n      return res.status(400).json({ error: 'Transaction already approved' });\n    }\n\n    const approveTransaction = db.transaction(() => {\n      db.prepare(\n        'UPDATE transactions SET status = ? WHERE id = ?'\n      ).run('completed', transactionId);\n\n      const amount = parseFloat(transaction.amount);\n      db.prepare(\n        'UPDATE users SET balance = balance + ?, total_recharge = total_recharge + ? WHERE id = ?'\n      ).run(amount, amount, transaction.user_id);\n    });\n\n    approveTransaction();\n\n    incrementPaymentAndRotate();\n\n    const user = db.prepare('SELECT balance FROM users WHERE id = ?').get(transaction.user_id);\n\n    res.json({\n      message: 'Recharge approved successfully',\n      balance: user.balance\n    });\n  } catch (error) {\n    console.error('Approve recharge error:', error);\n    res.status(500).json({ error: 'Failed to approve recharge' });\n  }\n}\n\nasync function initiateWithdraw(req, res) {\n  const { amount, upiId } = req.body;\n  const userId = req.user.userId;\n\n  if (!amount || amount <= 0) {\n    return res.status(400).json({ error: 'Invalid amount' });\n  }\n\n  if (amount < 300) {\n    return res.status(400).json({ error: 'Minimum withdrawal amount is ₹300' });\n  }\n\n  if (!upiId) {\n    return res.status(400).json({ error: 'UPI ID is required' });\n  }\n\n  try {\n    const user = db.prepare('SELECT balance FROM users WHERE id = ?').get(userId);\n    const currentBalance = parseFloat(user.balance);\n\n    if (currentBalance < amount) {\n      return res.status(400).json({ error: 'Insufficient balance' });\n    }\n\n    const withdrawTransaction = db.transaction(() => {\n      const result = db.prepare(\n        `INSERT INTO transactions (user_id, type, amount, status, upi_id) \n         VALUES (?, ?, ?, ?, ?)`\n      ).run(userId, 'withdraw', amount, 'pending', upiId);\n\n      db.prepare(\n        'UPDATE users SET balance = balance - ?, total_withdraw = total_withdraw + ? WHERE id = ?'\n      ).run(amount, amount, userId);\n\n      return result.lastInsertRowid;\n    });\n\n    const transactionId = withdrawTransaction();\n\n    const updatedUser = db.prepare('SELECT balance FROM users WHERE id = ?').get(userId);\n\n    res.json({\n      message: 'Withdrawal request submitted successfully',\n      transactionId: transactionId,\n      balance: updatedUser.balance,\n      note: 'Your withdrawal will be processed within 24 hours'\n    });\n  } catch (error) {\n    console.error('Withdraw error:', error);\n    res.status(500).json({ error: 'Failed to process withdrawal' });\n  }\n}\n\nasync function getTransactions(req, res) {\n  const userId = req.user.userId;\n\n  try {\n    const result = db.prepare(\n      `SELECT id, type, amount, status, upi_id, utr_number, created_at \n       FROM transactions \n       WHERE user_id = ? \n       ORDER BY created_at DESC \n       LIMIT 50`\n    ).all(userId);\n\n    res.json({ transactions: result });\n  } catch (error) {\n    console.error('Get transactions error:', error);\n    res.status(500).json({ error: 'Failed to fetch transactions' });\n  }\n}\n\nmodule.exports = {\n  initiateRecharge,\n  confirmRecharge,\n  approveRecharge,\n  initiateWithdraw,\n  getTransactions\n};\n","size_bytes":5792},"ADMIN_README.md":{"content":"# Admin Panel Access Guide\n\n## Overview\nThe Easy Money platform now includes a comprehensive admin panel for managing users, transactions, and payments.\n\n## Admin Panel URL\nAccess the admin panel at: `/admin.html`\n\n## Making a User an Admin\n\n### Method 1: Using Node.js Script\nRun the provided script to make any user an admin:\n```bash\nnode make-admin.js <phone_number>\n```\n\nExample:\n```bash\nnode make-admin.js 9876543210\n```\n\n### Method 2: Direct Database Update\nYou can also manually update the database:\n```bash\nsqlite3 database.sqlite \"UPDATE users SET is_admin = 1 WHERE phone = '9876543210';\"\n```\n\n## Admin Panel Features\n\n### 1. Dashboard Statistics\n- Total Users\n- Total Balance\n- Total Recharge Amount\n- Total Withdraw Amount\n\n### 2. Users Management\nView all registered users with:\n- User ID\n- Phone Number\n- Balance\n- Total Recharge\n- Total Withdraw\n- Referral Code\n- Registration Date\n\n### 3. Transactions\nView all transactions in the system:\n- Transaction ID\n- User ID\n- Type (recharge/withdraw)\n- Amount\n- Status\n- UPI ID\n- UTR Number\n- Created Date\n\n### 4. Pending Payments\nManage pending payments with options to:\n- Approve recharge requests (credits user balance)\n- Reject payments (reverses balance deductions for withdrawals)\n\n## Security Notes\n\n### JWT Secret\n⚠️ **Important**: Set the `JWT_SECRET` environment variable for production deployments.\n\nThe system currently uses a default JWT secret. For production:\n1. Generate a strong random secret\n2. Set it as an environment variable\n3. Never commit secrets to version control\n\n### Admin Access Control\n- Admin routes are protected with JWT authentication\n- Only users with `is_admin = 1` can access admin endpoints\n- Admin panel checks for admin privileges on login\n\n## Database Schema\n\n### Users Table\n```sql\nCREATE TABLE users (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  phone TEXT UNIQUE NOT NULL,\n  password_hash TEXT NOT NULL,\n  balance REAL DEFAULT 0.00,\n  total_recharge REAL DEFAULT 0.00,\n  total_withdraw REAL DEFAULT 0.00,\n  total_welfare REAL DEFAULT 0.00,\n  referral_code TEXT UNIQUE NOT NULL,\n  referred_by TEXT,\n  is_admin INTEGER DEFAULT 0,  -- Admin flag\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n```\n\n## API Endpoints\n\n### Admin Endpoints\n- `GET /api/admin/stats` - Get platform statistics\n- `GET /api/admin/users` - Get all users\n- `GET /api/admin/transactions` - Get all transactions\n- `GET /api/admin/pending` - Get pending payments\n- `POST /api/admin/approve` - Approve a payment\n- `POST /api/admin/reject` - Reject a payment\n\nAll admin endpoints require:\n1. Valid JWT token in Authorization header\n2. User must have `is_admin = 1` flag\n\n## Troubleshooting\n\n### Can't Access Admin Panel\n1. Ensure you're logged in\n2. Check that your user has `is_admin = 1` in the database\n3. Clear browser cache and re-login\n\n### Missing Columns Error\nIf you see \"no such column: is_admin\":\n1. Restart the server - it will auto-migrate the database\n2. The migration adds the column automatically\n\n## Product Images\nProduct images have been updated to use stock images from the `attached_assets/stock_images/` directory for better visual presentation.\n","size_bytes":3141},"api/admin-sqlite.js":{"content":"const { db } = require('./db');\n\nfunction authenticateAdmin(req, res, next) {\n  if (!req.user || !req.user.isAdmin) {\n    return res.status(403).json({ error: 'Admin access required' });\n  }\n  next();\n}\n\nasync function getStats(req, res) {\n  try {\n    const usersResult = db.prepare('SELECT COUNT(*) as count FROM users').get();\n    const balanceResult = db.prepare('SELECT SUM(balance) as total FROM users').get();\n    const rechargeResult = db.prepare('SELECT SUM(total_recharge) as total FROM users').get();\n    const withdrawResult = db.prepare('SELECT SUM(total_withdraw) as total FROM users').get();\n\n    res.json({\n      totalUsers: usersResult.count,\n      totalBalance: (balanceResult.total || 0).toFixed(2),\n      totalRecharge: (rechargeResult.total || 0).toFixed(2),\n      totalWithdraw: (withdrawResult.total || 0).toFixed(2)\n    });\n  } catch (error) {\n    console.error('Get stats error:', error);\n    res.status(500).json({ error: 'Failed to fetch stats' });\n  }\n}\n\nasync function getAllUsers(req, res) {\n  try {\n    const result = db.prepare(\n      `SELECT id, phone, balance, total_recharge, total_withdraw, total_welfare, referral_code, referred_by, created_at \n       FROM users \n       ORDER BY created_at DESC`\n    ).all();\n\n    res.json({ users: result });\n  } catch (error) {\n    console.error('Get all users error:', error);\n    res.status(500).json({ error: 'Failed to fetch users' });\n  }\n}\n\nasync function getAllTransactions(req, res) {\n  try {\n    const result = db.prepare(\n      `SELECT id, user_id, type, amount, status, upi_id, utr_number, created_at \n       FROM transactions \n       ORDER BY created_at DESC \n       LIMIT 200`\n    ).all();\n\n    res.json({ transactions: result });\n  } catch (error) {\n    console.error('Get all transactions error:', error);\n    res.status(500).json({ error: 'Failed to fetch transactions' });\n  }\n}\n\nasync function getPendingPayments(req, res) {\n  try {\n    const result = db.prepare(\n      `SELECT id, user_id, type, amount, status, upi_id, utr_number, created_at \n       FROM transactions \n       WHERE status IN ('pending', 'verification_pending') \n       ORDER BY created_at DESC`\n    ).all();\n\n    res.json({ pending: result });\n  } catch (error) {\n    console.error('Get pending payments error:', error);\n    res.status(500).json({ error: 'Failed to fetch pending payments' });\n  }\n}\n\nasync function approvePayment(req, res) {\n  const { transactionId } = req.body;\n\n  if (!transactionId) {\n    return res.status(400).json({ error: 'Transaction ID is required' });\n  }\n\n  try {\n    const transaction = db.prepare(\n      'SELECT id, user_id, amount, status, type FROM transactions WHERE id = ?'\n    ).get(transactionId);\n\n    if (!transaction) {\n      return res.status(404).json({ error: 'Transaction not found' });\n    }\n\n    if (transaction.status === 'completed') {\n      return res.status(400).json({ error: 'Transaction already approved' });\n    }\n\n    const approveTransaction = db.transaction(() => {\n      db.prepare(\n        'UPDATE transactions SET status = ? WHERE id = ?'\n      ).run('completed', transactionId);\n\n      if (transaction.type === 'recharge') {\n        const amount = parseFloat(transaction.amount);\n        db.prepare(\n          'UPDATE users SET balance = balance + ?, total_recharge = total_recharge + ? WHERE id = ?'\n        ).run(amount, amount, transaction.user_id);\n      }\n    });\n\n    approveTransaction();\n\n    res.json({ message: 'Payment approved successfully' });\n  } catch (error) {\n    console.error('Approve payment error:', error);\n    res.status(500).json({ error: 'Failed to approve payment' });\n  }\n}\n\nasync function rejectPayment(req, res) {\n  const { transactionId } = req.body;\n\n  if (!transactionId) {\n    return res.status(400).json({ error: 'Transaction ID is required' });\n  }\n\n  try {\n    const transaction = db.prepare(\n      'SELECT id, user_id, amount, status, type FROM transactions WHERE id = ?'\n    ).get(transactionId);\n\n    if (!transaction) {\n      return res.status(404).json({ error: 'Transaction not found' });\n    }\n\n    const rejectTransaction = db.transaction(() => {\n      db.prepare(\n        'UPDATE transactions SET status = ? WHERE id = ?'\n      ).run('rejected', transactionId);\n\n      if (transaction.type === 'withdraw' && transaction.status !== 'completed') {\n        const amount = parseFloat(transaction.amount);\n        db.prepare(\n          'UPDATE users SET balance = balance + ?, total_withdraw = total_withdraw - ? WHERE id = ?'\n        ).run(amount, amount, transaction.user_id);\n      }\n    });\n\n    rejectTransaction();\n\n    res.json({ message: 'Payment rejected successfully' });\n  } catch (error) {\n    console.error('Reject payment error:', error);\n    res.status(500).json({ error: 'Failed to reject payment' });\n  }\n}\n\nasync function getUPIs(req, res) {\n  try {\n    const result = db.prepare(\n      `SELECT id, upi_id, qr_position, successful_payments, max_payments_per_qr, is_active, created_at \n       FROM qr_codes \n       ORDER BY qr_position ASC`\n    ).all();\n\n    res.json({ upis: result });\n  } catch (error) {\n    console.error('Get UPIs error:', error);\n    res.status(500).json({ error: 'Failed to fetch UPI IDs' });\n  }\n}\n\nmodule.exports = {\n  authenticateAdmin,\n  getStats,\n  getAllUsers,\n  getAllTransactions,\n  getPendingPayments,\n  approvePayment,\n  rejectPayment,\n  getUPIs\n};\n","size_bytes":5359},"make-admin.js":{"content":"const Database = require('better-sqlite3');\nconst path = require('path');\n\nconst dbPath = path.join(__dirname, 'database.sqlite');\nconst db = new Database(dbPath);\n\nconst phone = process.argv[2];\n\nif (!phone) {\n  console.error('Usage: node make-admin.js <phone_number>');\n  console.error('Example: node make-admin.js 9876543210');\n  process.exit(1);\n}\n\ntry {\n  const user = db.prepare('SELECT id, phone, is_admin FROM users WHERE phone = ?').get(phone);\n  \n  if (!user) {\n    console.error(`❌ User with phone number ${phone} not found.`);\n    console.log('\\nPlease register the user first or check the phone number.');\n    process.exit(1);\n  }\n\n  if (user.is_admin === 1) {\n    console.log(`✅ User ${phone} is already an admin.`);\n    process.exit(0);\n  }\n\n  db.prepare('UPDATE users SET is_admin = 1 WHERE phone = ?').run(phone);\n  \n  console.log(`✅ Successfully made user ${phone} an admin!`);\n  console.log('\\nUser Details:');\n  console.log(`- Phone: ${user.phone}`);\n  console.log(`- User ID: ${user.id}`);\n  console.log(`- Admin Status: Yes`);\n  console.log('\\nYou can now login and access the admin panel at /admin.html');\n  \n} catch (error) {\n  console.error('❌ Error:', error.message);\n  process.exit(1);\n} finally {\n  db.close();\n}\n","size_bytes":1249}},"version":2}